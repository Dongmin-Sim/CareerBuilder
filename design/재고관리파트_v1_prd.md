# 커리어빌더_재고관리파트_v1_prd

---

## 1. 개요

### 배경
위치별 실시간 제품 재고 서비스는 고객들에게 제품의 가용성을 확인할 수 있는 편의성을 제공하여 구매 결정을 돕고, 판매자들은 효율적인 재고 관리를 통해 비용을 절감하고 수익을 극대화할 수 있습니다.

### 목적
위치 별 제품의 재고 관리를 위한 서비스를 구현합니다.  
사용자는 제품을 등록하고 관리할 수 있으며, 제품의 재고를 위치별로 관리할 수 있습니다.  

### 대상
제품 관리자, 재고 관리자


## 2. 기능 요구 사항
본 서비스는 크게 제품과 재고 관리 기능을 주로 제공합니다.  
이 외에도 동일한 제품을 여러 공간에 존재하는 경우 위치별로 제품의 재고를 실시간으로 관리할 수 있습니다.

### 2.1 제품
제품은 재고관리의 기본 단위입니다.

#### 2.1.1 제품 생성
- **목적** : 제품을 등록합니다.
- **입력** : 제품명, 바코드, 이미지, 구매가, 판매가, 제품속성, 초기수량, 위치
- **출력** : 생성된 제품의 식별자(ID), 제품명, 바코드, 이미지, 구매가, 판매가를 담은 정보
- 제한 사항 
  1. 제품명은 필수값입니다. 공백 값을 허용하지 않습니다.
  2. 초기수량은 필수값입니다. 사용자 입력값이 없을 경우 기본값은 0이어야 합니다.
  3. 위치값은 필수값은 아니지만, 사용자 입력이 없을 경우 기본값은 0이어야 합니다.
  4. 제품을 생성 후 위치와 초기수량값은 재고에 등록되어야 합니다. 

#### 2.1.2 제품 리스트 조회
- **목적** : 등록된 제품의 리스트를 조회합니다.
- **입력** : 없음
- **출력** : 등록된 제품의 정보 리스트
- **제한 사항**
  1. 한번에 불러올 제품의 개수는 30개로 제한합니다.
  2. <u>(추후 필터 및 정렬 기능 추가 예정)</u>

#### 2.1.3 제품 상세 조회
- **목적** : 등록된 제품의 상세 정보를 조회합니다.
- **입력** : 제품 식별자(ID)
- **출력** : 제품 식별자(ID) 제품명, 바코드, 이미지, 구매가, 판매가, 제품속성 리스트, 위치별 재고량 정보
- **제한 사항**
  1. 제품 식별자(ID)는 필수값입니다. 
  2. 제품 식별자(ID)를 가진 제품이 존재하지 않는 경우, 조회할 수 없습니다.

#### 2.1.4 제품 수정
- **목적** : 등록된 제품의 정보를 수정합니다.
- **입력** : 제품 식별자(ID), 수정할 제품의 정보(제품명, 바코드, 이미지, 구매가, 판매가, 제품속성)
- **출력** : 수정된 제품의 제품명, 바코드, 이미지, 구매가, 판매가, 제품속성 리스트
- **제한 사항**
  1. 제품 식별자(ID)와 수정할 제품 정보는 필수값입니다.
  2. 제품 식별자(ID)를 가진 제품이 존재하지 않는 경우, 수정할 수 없습니다.

#### 2.1.5 제품 삭제
- **목적** : 등록된 제품을 삭제합니다.
- **입력** : 제품 식별자(ID)
- **출력** : 삭제된 제품 식별자(ID)
- **제한 사항**
  1. 제품 식별자(ID)는 필수값입니다.
  2. 제품 식별자(ID)를 가진 제품이 존재하지 않는 경우, 삭제할 수 없습니다.
  3. 제품을 삭제할 경우 제품 식별자(ID)를 가진 위치의 재고도 감소해야 합니다.

--- 

### 2.2 제품속성
제품속성을 이용하여 제품에 넣을 정보를 커스터마이징 할 수 있습니다.   
예를들어 브랜드, 사이즈, 컬러, 카테고리 등 필요한 항목을 만들어 추가할 수 있습니다.

#### 2.2.1 제품속성 생성
- **목적** : 제품속성을 생성합니다.
- **입력** : 제품속성의 이름, 종류
- **출력** : 생성된 제품속성의 식별자(ID), 이름, 종류를 담은 정보
- 제한 사항
  1. 제품속성의 이름과 종류는 필수값입니다.
  2. 종류는 텍스트, 숫자, 날짜 중 한 가지를 선택해야 합니다.

#### 2.2.2 제품속성 리스트 조회
- **목적** : 등록된 제품속성의 리스트를 조회합니다.
- **입력** : 없음
- **출력** : 등록된 제품속성 리스트
- **제한 사항**
  1. 한번에 불러올 제품속성의 수량은 30개로 제한합니다.
  2. 제품속성의 순서(order)를 기준으로 오름차순으로 반환합니다.

#### 2.2.3 제품속성 상세 조회
- **목적** : 등록된 제품속성의 상세정보를 조회합니다.
- **입력** : 제품속성 식별자(ID)
- **출력** : 제품속성의 식별자(ID), 이름, 종류, 순서를 담은 정보 
- **제한 사항**
  1. 제품속성 식별자(ID)는 필수값입니다.
  2. 제품속성 식별자(ID)를 가진 제품속성이 존재하지 않는 경우, 조회할 수 없습니다.

#### 2.2.4 제품속성 수정
- **목적** : 등록된 제품속성의 정보를 수정합니다.
- **입력** : 제품속성 식별자(ID)와 수정할 정보(이름, 순서)
- **출력** : 수정된 제품속성의 식별자(ID), 이름, 순서
- **제한 사항**
  1. 제품속성 식별자(ID)와 수정할 제품 정보는 필수값입니다.
  2. 제품속성 식별자(ID)를 가진 제품이 존재하지 않는 경우, 수정할 수 없습니다.
  3. 제품속성의 종류는 수정할 수 없습니다.
  4. 이미 존재하는 순서로 변경할 경우, 해당 순서를 가지고 있던 제품속성과 바꾸게 됩니다. 

#### 2.2.5 제품속성 삭제
- **목적** : 등록된 제품속성을 삭제합니다.
- **입력** : 제품속성 식별자(ID)
- **출력** : 삭제된 제품속성 식별자(ID)
- **제한 사항**
  1. 제품속성 식별자(ID)는 필수값입니다.
  2. 제품속성 식별자(ID)를 가진 제품이 존재하지 않는 경우, 삭제할 수 없습니다.
  3. 제품속성을 삭제할 경우 제품속성을 가지고 있는 제품에도 해당 속성이 삭제되어야 합니다.

---

### 2.3 위치
위치는 제품을 보관하는 장소를 말합니다.

#### 2.3.1 위치 생성
- **목적** : 위치를 생성합니다.
- **입력** : 위치의 이름과 메모
- **출력** : 생성된 위치의 식별자(ID), 이름, 메모를 담은 정보
- 제한 사항
  1. 위치의 이름은 필수값입니다.
  2. 이름은 중복을 허용하지 않습니다.

#### 2.3.2 위치 리스트 조회
- **목적** : 등록된 위치의 리스트를 조회합니다.
- **입력** : 없음
- **출력** : 등록된 위치 리스트
- **제한 사항**
  1. 한번에 불러올 위치의 개수는 30개로 제한합니다.

#### 2.3.3 위치 상세 조회
- **목적** : 등록된 위치의 상세정보를 조회합니다.
- **입력** : 위치 식별자(ID)
- **출력** : 위치 식별자(ID), 이름, 메모를 담은 정보
- **제한 사항**
  1. 위치 식별자(ID)는 필수값입니다.
  2. 위치 식별자(ID)를 가진 위치가 존재하지 않는 경우, 조회할 수 없습니다.

#### 2.3.4 위치 수정
- **목적** : 등록된 위치의 정보를 수정합니다.
- **입력** : 위치 식별자(ID)와 수정할 정보(이름, 메모)
- **출력** : 수정된 위치의 식별자(ID), 이름, 메모
- **제한 사항**
  1. 위치 식별자(ID)와 수정할 위치 정보는 필수값입니다.
  2. 위치 식별자(ID)를 가진 위치가 존재하지 않는 경우, 수정할 수 없습니다.
  3. 이름은 유일해야하므로 기존에 존재하는 이름으로는 수정이 불가능합니다.

#### 2.3.5 위치 삭제
- **목적** : 등록된 위치를 삭제합니다.
- **입력** : 위치 식별자(ID)
- **출력** : 삭제된 위치 식별자(ID)
- **제한 사항**
  1. 위치 식별자(ID)는 필수값입니다.
  2. 위치 식별자(ID)를 가진 위치가 존재하지 않는 경우, 삭제할 수 없습니다.
  3. 위치를 삭제할 경우 해당 위치에 존재하는 모든 상품의 재고가 삭제됩니다.

--- 

### 2.4 거래처
거래처는 제품의 재고의 거래(변화)를 발생시키는 대상입니다.

#### 2.4.1 거래처 생성
- **목적** : 거래처를 생성합니다.
- **입력** : 거래처의 종류, 이름, 전화번호, 이메일, 주소, 메모
- **출력** : 생성된 거래처 식별자(ID), 종류, 이름, 전화번호, 이메일, 주소, 메모를 담은 정보
- 제한 사항
  1. 거래처의 종류와 이름은 필수값입니다.
  2. 거래처의 종류는 "입고처", "출고처" 중 하나이어야만 합니다.

#### 2.4.2 거래처 리스트 조회
- **목적** : 등록된 거래처의 리스트를 조회합니다.
- **입력** : 없음
- **출력** : 등록된 거래처 리스트
- **제한 사항**
  1. 한번에 불러올 거래처의 개수는 30개로 제한합니다.

#### 2.4.3 거래처 상세 조회
- **목적** : 등록된 거래처의의 상세정보를 조회합니다.
- **입력** : 거래처 식별자(ID)
- **출력** : 거래처 식별자(ID), 종류, 이름, 전화번호, 이메일, 주소, 메모
- **제한 사항**
  1. 거래처 식별자(ID)는 필수값입니다.
  2. 거래처 식별자(ID)를 가진 거래처가 존재하지 않는 경우, 조회할 수 없습니다.

#### 2.4.4 거래처 수정
- **목적** : 등록된 거래처의 정보를 수정합니다.
- **입력** : 거래처 식별자(ID)와 수정할 정보(이름, 전화번호, 이메일, 주소, 메모)
- **출력** : 수정된 거래처 식별자(ID), 이름, 전화번호, 이메일, 주소, 메모
- **제한 사항**
  1. 거래처 식별자(ID)와 수정할 제품 정보는 필수값입니다.
  2. 거래처 식별자(ID)를 가진 제품이 존재하지 않는 경우, 수정할 수 없습니다.
  3. 거래처의 종류는 수정할 수 없습니다.

#### 2.4.5 거래처 삭제
- **목적** : 등록된 거래처를 삭제합니다.
- **입력** : 거래처 식별자(ID)
- **출력** : 삭제된 거래처 식별자(ID)
- **제한 사항**
  1. 거래처 식별자(ID)는 필수값입니다.
  2. 거래처 식별자(ID)를 가진 제품이 존재하지 않는 경우, 삭제할 수 없습니다.

---

### 2.5 거래
거래는 제품의 재고량 변화를 일으키는 행위입니다. 
거래는 특정 type을 가집니다.
- IN("입고") : 재고를 증가시킬때 사용합니다.
- OUT("출고") : 재고가 감소시킬때 사용됩니다.
- ADJUST("조정") : 재고를 수정할 때 사용합니다.
- MOVE("이동") : 재고간의 이동이 있을때 사용합니다.

#### 2.5.1 출고, 재고 감소 행위
- **목적** : 특정 위치의 특정 상품의 재고를 감소시킬 수 있습니다. 
- **입력** : 거래타입(OUT), 위치식별자(출고지), 제품리스트<제품식별자, 수량>
- **출력** : 거래식별자(ID), 제품별 현재 재고량 
  1. 거래타입과 위치식별자(출고지)는 필수값입니다.
  2. 거래타입은 출고를 나타내는 "OUT" 이어야만 합니다.
  3. 출고할 제품리스트는 최소 한개 이상이어야 합니다.
  4. 위치식별자(출고지)를 가진 위치가 존재하지 않는 경우 작업을 수행할 수 없습니다.
  5. 제품식별자를 가진 제품이 존재하지 않는 경우 작업을 수행할 수 없습니다.
  6. 위치식별자(출고지)에 제품식별자를 가진 제품이 없는 경우 작업을 수행할 수 없습니다.
  7. 위치식별자(출고지)의 재고가, 출고할 수량보다 적어도 가능합니다. (마이너스 재고 허용)
  8. 수량은 음수값을 가질 수 없습니다.

#### 2.5.2 입고, 재고 증가 행위
- **목적** : 특정 위치의 특정 상품의 재고를 증가시킬 수 있습니다.
- **입력** : 거래타입(IN), 위치식별자(입고지), 제품리스트<제품식별자, 수량>
- **출력** : 거래식별자(ID), 제품별 현재 재고량
- **제한 사항**
  1. 거래타입과 위치식별자(입고지)는 필수값입니다.
  2. 거래타입은 입고를 나타내는 "IN" 이어야만 합니다.
  3. 입고할 제품리스트는 최소 한개 이상이어야 합니다.
  4. 위치식별자(입고지)를 가진 위치가 존재하지 않는 경우 작업을 수행할 수 없습니다.
  5. 제품식별자를 가진 제품이 존재하지 않는 경우 작업을 수행할 수 없습니다.
  6. 위치식별자(입고지)에 제품식별자를 가진 제품이 없는 경우 작업을 수행할 수 없습니다.
  7. 수량은 음수값을 가질 수 없습니다.

#### 2.5.3 이동, 재고 이동 행위
- **목적** : 특정 위치들의 특정 상품의 재고를 이동시킬 수 있습니다.
- **입력** : 거래타입(MOVE), 위치식별자(촐고지), 위치식별자(입고지), 제품리스트<제품식별자, 수량>
- **출력** : 거래식별자(ID), 제품별 이동량
- **제한 사항**
  1. 거래타입과 위치식별자(출고지), 위치식별자(입고지)는 필수값입니다.
  2. 거래타입은 입고를 나타내는 "MOVE" 이어야만 합니다.
  3. 입고할 제품리스트는 최소 한개 이상이어야 합니다.
  4. 위치식별자(출고지)를 가진 위치가 존재하지 않는 경우 작업을 수행할 수 없습니다.
  5. 위치식별자(입고지)를 가진 위치가 존재하지 않는 경우 작업을 수행할 수 없습니다.
  6. 제품식별자를 가진 제품이 존재하지 않는 경우 작업을 수행할 수 없습니다.
  7. 위치식별자(출고지)에 제품식별자를 가진 제품이 없는 경우 작업을 수행할 수 없습니다.
  8. 위치식별자(출고지)의 재고가, 이동할 수량보다 적어도 가능합니다 (마이너스 재고 허용)
  9. 수량은 음수값을 가질 수 없습니다.

#### 2.5.4 조정, 재고 조정 행위
- **목적** : 특정 위치의 특정 상품의 재고를 변경할 수 있습니다.
- **입력** : 거래타입(ADJUST), 위치식별자, 제품리스트<제품식별자, 수량>
- **출력** : 거래식별자(ID), 제품별 재고량
- **제한 사항**
  1. 거래타입과 위치식별자는 필수값입니다.
  2. 거래타입은 입고를 나타내는 "ADJUST" 이어야만 합니다.
  3. 조정할 제품리스트는 최소 한개 이상이어야 합니다.
  4. 위치식별자를 가진 위치가 존재하지 않는 경우 작업을 수행할 수 없습니다.
  5. 제품식별자를 가진 제품이 존재하지 않는 경우 작업을 수행할 수 없습니다.

#### 2.5.5 거래 수정 행위
- **목적** : 거래내역을 수정할 수 있습니다.
- **입력** : 거래식별자(ID), 위치식별자(출발지 or 도착지), 거래처식별자, 메모, 제품리스트<제품식별자, 수량>
- **출력**
  - 성공시 : 거래식별자(ID)를 포함한 수정 내역
  - 실패시 : 실패코드를 담은 표준 에러 응답
- **제한 사항**
  1. 거래타입은 수정할 수 없습니다.
  2. 조정할 제품리스트는 최소 한개 이상이어야 합니다.
  3. 위치식별자를 가진 위치가 존재하지 않는 경우 작업을 수행할 수 없습니다.
  4. 제품식별자를 가진 제품이 존재하지 않는 경우 작업을 수행할 수 없습니다.
  5. 거래가 수정될 경우, 수정 이전 거래의 제품과 수량이 재고에 반영되어야 합니다. 
     1. 예시1) [재고수량: 200] [거래타입: IN, 제품id: 1, 수량: 200]인 거래를 [수량: 100]으로 수정할 경우 제품id:1의 재고는 100이 되어야 합니다.
  6.  

---

### 2.6 재고 

#### 2.6.1 재고 확인
- **목적** : 특정 위치의 특정 상품의 재고를 확인할 수 있습니다.
- **입력** : 위치식별자(ID)
- **출력** : 위치식별자(ID), 제품별 재고량
- **제한 사항**
  1. 위치식별자(ID)는 필수값입니다.
  2. 위치식별자를 가진 위치가 존재하지 않는 경우 작업을 수행할 수 없습니다.
  3. 제품식별자를 가진 제품이 존재하지 않는 경우 작업을 수행할 수 없습니다.

#### 2.6.2 제품의 위치별 재고 수량 확인
- **목적** : 특정 제품의 위치별 재고 수량을 확인할 수 있습니다.
- **입력** : 제품식별자(ID)
- **출력** : 위치별 재고 수량<위치식별자, 재고수량>
- **제한 사항**
  1. 위치식별자(ID)는 필수값입니다.
  2. 위치식별자를 가진 위치가 존재하지 않는 경우 작업을 수행할 수 없습니다.
  3. 제품식별자를 가진 제품이 존재하지 않는 경우 작업을 수행할 수 없습니다.